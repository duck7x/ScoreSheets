<%- include("../partials/header") %>
	<div class="popup-container image-preview">
		<div class="popup-window image-preview">
			<!-- <h1>Image preview</h1> -->
			<br>
			<span class="close-popup ui black button">Close</span>
		</div>
	</div>

	<h1>THIS IS THE EDIT PAGE OF <%= game.name %>, YAY!</h1>

	<div class="container">
		
		<form action="/games/<%= game._id %>?_method=PUT" method="POST">
			<span class="name-container">
				<span class="question-mark" name="name">
					<i class="question icon"></i>
				</span>
				<span class="explanation" name="name">
					The game's name, will appear in title
				</span> 
				<label name="name">Name:</label> 
				<input type="text" placeholder="name" name="name" <% if(game.name){ %> value="<%= game.name %>" <% } %> required>
			</span>
			<br>
			<span class="image-container">
				<span class="question-mark" name="image">
					<i class="question icon"></i>
				</span>
				<span class="explanation" name="image">
					Image for game, can be URL or path
				</span> 
				<label name="image">Image:</label> 
				<input type="text" placeholder="image url/path" name="image" <% if(game.image){ %> value="<%= game.image %>" <% } %> > 
			</span>
			<span class="upload-container">
				<span class="question-mark" name="upload">
					<i class="question icon"></i>
				</span>
				<span class="explanation" name="upload">
					If the image is URL, check this to upload the image to the server
				</span> 
				<label name="upload">Upload?</label> 
				<input type="checkbox" name="upload"> 
				<span class="open-popup mini compact circular ui black button" name="image">
					Preview
				</span>
			</span>
			<br>
			<span class="minPlayers-container">
				<span class="question-mark" name="minPlayers">
					<i class="question icon"></i>
				</span>
				<span class="explanation" name="minPlayers">
					Minimum amount of players for the game
				</span> 
				<label name="minPlayers">Minimum players:</label> 
				<input type="number" name="minPlayers" <% if(game.minPlayers){ %> value="<%= game.minPlayers %>" <% } %> > 
			</span>
			<span class="maxPlayers-container">
				<span class="question-mark" name="maxPlayers">
					<i class="question icon"></i>
				</span>
				<span class="explanation" name="maxPlayers">
					Maximum amount of players for the game
				</span> 
				<label name="maxPlayers">Maximum players:</label> 
				<input type="number" name="maxPlayers" <% if(game.maxPlayers){ %> value="<%= game.maxPlayers %>" <% } %> >
			</span>
			<br>
			<span class="winCondition-container">
				<span class="question-mark" name="winCondition">
					<i class="question icon"></i>
				</span>
				<span class="explanation" name="winCondition">
					The game's win condition
				</span> 
				<label name="winCondition">Win condition:</label>
				<select class="" name="winCondition">
					<% winConditions.forEach(function(condition){ %>
						<option value="<%= condition %>" <% if(game.winCondition && game.winCondition == condition){ %> selected="selected" <% } %> ><%= condition %></option>
					<% }) %>
				</select>
			</span>
			<br>
			<span class="tieBreaker-container">
				<span class="question-mark" name="tieBreaker">
					<i class="question icon"></i>
				</span>
				<span class="explanation" name="tieBreaker">
					The game's tie breaker
				</span> 
				<label name="tieBreaker">Tie breaker:</label> 
				<input type="text" placeholder="tie breaker" name="tieBreaker" <% if(game.tieBreaker){ %> value="<%= game.tieBreaker %>" <% } %>>
			</span>
			<br>
			
			<h1>Fields</h1>
			<span class="clickable white add-field"><i class="plus circle icon"></i> Add field</span>
			<div id="field-template" class="field-template template">
				<div class="five wide column">
					<div class="center">
						<span class="remove-field clickable white" value="0">REMOVE</span> //
						<span class="clear-field clickable white">CLEAR</span>
					</div>
					<div class="field">
						<!-- DESC: ID // PLAYER: NAME -->
						<span class="fieldName-container">
							<span class="question-mark" name="fieldName">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldName">
								ID of desc cell and name of players cell
							</span> 
							<label name="fieldName">Name:</label> 
							<input class="field-input" type="text" name="fieldName" placeholder="field name">
						</span>
						<br>
						
						<!-- DESC: actual text -->
						<span class="fieldTitle-container">
							<span class="question-mark" name="fieldTitle">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldTitle">
								Will appear in desc cell
							</span> 
							<label name="fieldTitle">Title:</label> 
							<input class="field-input" type="text" name="fieldTitle" placeholder="field title">
						</span>
						<br>
						
						<!-- DESC: alt // PLAYER: value -->
						<span class="fieldValue-container">
							<span class="question-mark" name="fieldValue">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldValue">
								For calculation, this will be multiplied by the input
							</span> 
							<label name="fieldValue">Value:</label> 
							<input class="field-input" type="number" name="fieldValue">
						</span>
						<br>
						
						<!-- DESC: displayed icon -->
						<span class="fieldIcon-container">
							<span class="question-mark" name="fieldIcon">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldIcon">
								Icon to display in desc cell, can be URL or path
							</span> 
							<label name="fieldIcon">Icon:</label> 
							<input class="field-input" type="text" placeholder="icon url/path" name="fieldIcon">
						</span>
						<span class="fieldUpload-container">
							<span class="question-mark" name="fieldUpload">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldUpload">
								If the icon is from URL, you can check this to upload it to the server
							</span> 
							<label name="fieldUpload">Upload?</label> 
							<input class="field-input" type="checkbox" name="fieldUpload">
						</span>
						 <br>
						
						<!-- DESC: hover content -->
						<span class="fieldDescription-container">
							<span class="question-mark" name="fieldDescription">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldDescription">
								Description that will be displayed when hovering over the field
							</span> 
							<label name="fieldDescription">Field description:</label> 
							<input class="field-input" type="text" name="fieldDescription" placeholder="field description">
						</span>
						<br>
						
						<!-- DESC: css classes -->
						<span class="fieldDescClasses-container">
							<span class="question-mark" name="fieldDescClasses">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldDescClasses">
								css classes to add to desc cell
							</span> 
							<label name="fieldDescClasses">Desc classes:</label> 
							<input class="field-input" type="text" name="fieldDescClasses" placeholder="field desc classes">
						</span>
						<br>
						
						<!-- PLAYER: css classes -->
						<span class="fieldPlayerClasses-container">
							<span class="question-mark" name="fieldPlayerClasses">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldPlayerClasses">
								css classes to add to players cells
							</span> 
							<label name="fieldPlayerClasses">Player classes:</label> 
							<input class="field-input" type="text" name="fieldPlayerClasses" placeholder="field player classes">
						</span>
						<br>
						
						<!-- DESC: class // PLAYER: class -->
						<span class="fieldCalcMethod-container">
							<span class="question-mark" name="fieldCalcMethod">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldCalcMethod">
								Calculation type, reg is simple multiply of value * input
							</span> 
							<label name="fieldCalcMethod">Calculation Method:</label> 
							<select class="field-input fieldCalcMethod" name="fieldCalcMethod">
								<% calcMethods.forEach(function(method){ %>
									<option value="<%= method %>"><%= method %></option>
								<% }) %>
							</select>
						</span>
						<br>
						
						<!-- PLAYER: form type -->
						<!-- <span class="fieldFormType-container">
							<span class="question-mark" name="fieldFormType">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldFormType">
								Input type of the cell
							</span> 
							<label name="fieldFormType">Form type:</label> 
							<select class="field-input" name="fieldFormType">
								<% formTypes.forEach(function(formType){ %>
									<option value="<%= formType %>"><%= formType %></option>
								<% }) %>
							</select>
						</span>
						<br> -->
						
						<!-- DESC: class // PLAYER: class -->
						<span class="fieldScoreTotal-container">
							<span class="question-mark" name="fieldScoreTotal">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldScoreTotal">
								If checked, this cell will be added to the total score of the player
							</span> 
							<label name="fieldScoreTotal">Score total?</label> 
							<input class="field-input" type="checkbox" name="fieldScoreTotal" checked>
						</span>
						
						<!-- DESC: class // PLAYER: class -->
						<span class="fieldHidden-container">
							<span class="question-mark" name="fieldHidden">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldHidden">
								If checked, this cell will be hidden
							</span> 
							<label name="fieldHidden">Hidden?</label> 
							<input class="field-input" type="checkbox" name="fieldHidden">
						</span>
						
						<!-- DESC: // PLAYER: class -->
						<span class="fieldDisabled-container">
							<span class="question-mark" name="fieldDisabled">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldDisabled">
								If checked, this cell will be disabled
							</span> 
							<label name="fieldDisabled">Disabled?</label> 
							<input class="field-input" type="checkbox" name="fieldDisabled">
						</span>
					</div>
				</div>
			</div>
			
			<div id="sets-template" class="template">
				<!-- DESC: alt // PLAYER: sets value -->
				<span class="fieldSetsValue-container">
					<br>
					<span class="question-mark" name="fieldSetsValue">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldSetsValue">
						For calculation, this will be multiplied by the input/value
					</span> 
					<label name="fieldSetsValue">Sets Value:</label> 
					<input class="field-input" type="number" name="fieldSetsValue">
				</span>
			</div>
			
			<div id="generalCheckbox-template" class="template">
				<!-- A checkbox will appear above players table -->
				<span class="fieldGeneralCheckbox-container">
					<br>
					<span class="question-mark" name="fieldGeneralCheckbox">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldGeneralCheckbox">
						The functionality of the general checkbox
					</span> 
					<label name="fieldgeneralCheckbox">Functionality:</label> 
					<select class="field-input generalCheckboxFunctionality" name="fieldGeneralCheckboxFunctionality">
						<% generalCheckboxFunctionalities.forEach(function(functionality){ %>
							<option value="<%= functionality %>"><%= functionality %></option>
						<% }) %>
					</select>
				</span>
			</div>
			
			<div id="addClass-template" class="template">
				<!-- Classes to be removd to playes cells -->
				<span class="fieldRemoveClass-container">
					<br>
					<span class="question-mark" name="fieldRemoveClass">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldRemoveClass">
						Removes a class(es) to specific field(s). If you want to add more than one class, separate it with a space.
					</span> 
					<label name="fieldRemoveClass">Class(es) to remove:</label> 
					<input class="field-input" type="text" name="fieldRemoveClass">
				</span>
				<!-- Classes to be added to playes cells -->
				<span class="fieldAddClass-container">
					<br>
					<span class="question-mark" name="fieldAddClass">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldAddClass">
						Adds a class(es) to specific field(s). If you want to add more than one class, separate it with a space.
					</span> 
					<label name="fieldAddClass">Class(es) to add:</label> 
					<input class="field-input" type="text" name="fieldAddClass">
				</span>
				<!-- Fields to which the classes will be added -->
				<span class="fieldAddFields-container">
					<br>
					<span class="question-mark" name="fieldAddFields">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldAddFields">
						Adds a class(es) to specific field(s). If you want the class(es) to more than one field, separate it with a space.
					</span> 
					<label name="fieldAddFields">Field(s) to add:</label> 
					<input class="field-input" type="text" name="fieldAddFields">
				</span>
			</div>
			
			<div id="multipleFields-template" class="template">
				<!-- DESC: class // PLAYER: class -->
				<span class="fieldMultipleFieldsMethod-container">
					<br>
					<span class="question-mark" name="fieldMultipleFieldsMethod">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldMultipleFieldsMethod">
						Calculates value based on other fields
					</span> 
					<label name="fieldMultipleFieldsMethod">Multiple calc method:</label> 
					<select class="field-input fieldMultipleFieldsMethod" name="fieldMultipleFieldsMethod">
					<% calcMethods.forEach(function(method){ %>
						<% if(method == "general-checkbox" || method === "multiple-fields"){ %>
							<% return %>
						<% } else { %>
							<option value="<%= method %>"><%= method %></option>
						<% } %>
					<% }) %>
						<option value="multiply">multiply</option>
					</select>
				</span>
				
				<!-- Fields relevant to calculation -->
				<span class="fieldMultipleFieldsRelevantFields-container">
					<br>
					<span class="question-mark" name="fieldMultipleFieldsRelevantFields">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldMultipleFieldsRelevantFields">
						All fields which should be added together for calculation, seperated by space.
					</span> 
					<label name="fieldMultipleFieldsRelevantFields">Fields to add:</label> 
					<input class="field-input" type="text" name="fieldMultipleFieldsRelevantFields">
				</span>
			</div>

			<div id="fieldMultipleFieldsSets-template" class="template">
				<!-- DESC: alt // PLAYER: sets value -->
				<span class="fieldMultipleFieldsSets-container">
					<br>
					<span class="question-mark" name="fieldMultipleFieldsSets">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldMultipleFieldsSets">
						For calculation, this will be multiplied by the input/value
					</span> 
					<label name="fieldMultipleFieldsSets">Sets Value:</label> 
					<input class="field-input" type="number" name="fieldMultipleFieldsSets">
				</span>
			</div>
			
			<!-- select template -->
			<div id="fieldSelect-template" class="template">
				<!-- DESC:  // PLAYER: Enables selection form values  -->
				<span class="fieldSelect-container">
					<br>
					<span class="question-mark" name="fieldSelect">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldSelect">
						Display selection field, separate values by a space.
					</span> 
					<label name="fieldSelect">Select options:</label> 
					<input class="field-input" type="text" name="fieldSelect">
				</span>
			</div>
			
			<!-- reach target template -->
			<div id="reachTarget-template" class="template">
				<!-- DESC:  // PLAYER:  -->
				<span class="fieldReachTargetRange-container">
					<br>
					<span class="question-mark" name="fieldReachTargetRange">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldReachTargetRange">
						The ranges of target points, and their value. write like [target:value], separate ranges by a space
					</span> 
					<label name="fieldReachTargetRange">Reach target ranges:</label> 
					<input class="field-input" type="text" name="fieldReachTargetRange">
				</span>
				<!-- DESC:  // PLAYER:  -->
				<span class="fieldReachTargetMethod-container">
					<br>
					<span class="question-mark" name="fieldReachTargetMethod">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldReachTargetMethod">
						The method of checking the target
					</span> 
					<label name="fieldReachTargetMethod">Method:</label> 
					<select class="field-input fieldReachTargetMethod" name="fieldReachTargetMethod">
						<% reachTargetMethods.forEach(function(method){ %>
							<option value="<%= method %>"><%= method %></option>
						<% }) %>
					</select>
				</span>
			</div>
			
			<!-- other-field reach-target template -->
			<div id="fieldReachTargetOtherField-template" class="template">
				<!-- DESC:  // PLAYER: Enables selection form values  -->
				<span class="fieldReachTargetOtherField-container">
					<br>
					<span class="question-mark" name="fieldReachTargetOtherField">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldReachTargetOtherField">
						Will calculate reach-taget by this field
					</span> 
					<label name="fieldReachTargetOtherField">Other field:</label> 
					<input class="field-input" type="text" name="fieldReachTargetOtherField">
				</span>
			</div>
			
			<!-- dynamic other-field reach-target template -->
			<div id="fieldReachTargetDynamicOtherFieldGlobal-template" class="template">
				<!-- DESC:  // PLAYER:  -->
				<span class="fieldReachTargetDynamicOtherFieldGlobal-container">
					<br>
					<span class="question-mark" name="fieldReachTargetDynamicOtherFieldGlobal">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldReachTargetDynamicOtherFieldGlobal">
						For dynamic other field - wether the other field is a global or personal field (check if refering to a global field)
					</span> 
					<label name="fieldReachTargetDynamicOtherFieldGlobal">Global field:</label> 
					<input class="field-input" type="checkbox" name="fieldReachTargetDynamicOtherFieldGlobal">
				</span>
			</div>
			
			<!-- unique sets template -->
			<div id="fieldUniqueSets-template" class="template">
				<!-- DESC:  // PLAYER: Enables selection form values  -->
				<span class="fieldUiqueSetsValue-container">
					<br>
					<span class="question-mark" name="fieldUiqueSetsValue">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldUiqueSetsValue">
						Will calculate unique sets by these values (separated by a space), write like this: [amount:points]
					</span> 
					<label name="fieldUiqueSetsValue">Sets Values:</label> 
					<input class="field-input" type="text" name="fieldUiqueSetsValue">
				</span>
				<!-- DESC:  // PLAYER:  -->
				<span class="fieldUniqueSetsFields-container">
					<br>
					<span class="question-mark" name="fieldUniqueSetsFields">
						<i class="question icon"></i>
					</span>
					<span class="explanation" name="fieldUniqueSetsFields">
						Will calculate unique sets by these fields (separated by a space)
					</span> 
					<label name="fieldUniqueSetsFields">Fields:</label> 
					<input class="field-input" type="text" name="fieldUniqueSetsFields">
				</span>
			</div>

			<div id="fields-container" class="fields-container ui grid">
				<% var count = 0; %>
				<% game.fields.forEach(function(field){ %>
					<% count++; %>
					<div class="five wide column">
					<div class="center">
						<span class="remove-field clickable white" value="<%= count %>">REMOVE</span> //
						<span class="clear-field clickable white">CLEAR</span>
					</div>

					<div class="field" count="<%= count %>">
						<!-- DESC: ID // PLAYER: NAME // field.name -->
						<span class="fieldName-container">
							<span class="question-mark" name="fieldName<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldName<%= count %>">
								ID of desc cell and name of players cell
							</span>
							<label name="fieldName<%= count %>">Name:</label> 
							<input class="field-input" type="text" name="fieldName<%= count %>" placeholder="field name" <% if(field.name){ %> value="<%= field.name %>" <% } %> >
						</span>
						<br>
						
						<!-- DESC: actual text // field.title -->
						<span class="fieldTitle-container">
						<span class="question-mark" name="fieldTitle<%= count %>">
							<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldTitle<%= count %>">
								Will appear in desc cell
							</span> 
							<label name="fieldTitle<%= count %>">Title:</label> 
							<input class="field-input" type="text" name="fieldTitle<%= count %>" placeholder="field title" <% if(field.title){ %> value="<%= field.title %>" <% } %> >
						</span>
						<br>
						
						<!-- DESC: alt // PLAYER: value // field.value -->
						<span class="fieldValue-container">
							<span class="question-mark" name="fieldValue<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldValue<%= count %>">
								For calculation, this will be multiplied by the input
							</span> 
							<label name="fieldValue<%= count %>">Value:</label> 
							<input class="field-input" type="number" name="fieldValue<%= count %>" <% if(field.value){ %> value="<%= field.value %>" <% } %> >
						</span>
						<br>
						
						<% if(field.calcMethod && field.calcMethod === "sets"){ %>
							<!-- DESC: alt // PLAYER: sets value -->
							<span class="fieldSetsValue-container">
								<span class="question-mark" name="fieldSetsValue<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldSetsValue<%= count %>">
									For calculation, this will be multiplied by the input/value
								</span> 
								<label name="fieldSetsValue<%= count %>">Sets Value:</label> 
								<input class="field-input" type="number" name="fieldSetsValue<%= count %>" <% if(field.setsValue){ %> value="<%= field.setsValue %>" <% } %> >
							</span>
						<% } else if(field.calcMethod && field.calcMethod === "general-checkbox"){ %>
							<!-- A checkbox will appear above players table -->
							<span class="fieldGeneralCheckbox-container">
								<span class="question-mark" name="fieldGeneralCheckbox<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldGeneralCheckbox<%= count %>">
									The functionality of the general checkbox
								</span> 
								<label name="fieldgeneralCheckbox<%= count %>">Functionality:</label> 
								<select class="field-input generalCheckboxFunctionality" name="fieldGeneralCheckboxFunctionality<%= count %>">
									<% generalCheckboxFunctionalities.forEach(function(functionality){ %>
										<option value="<%= functionality %>" <% if(field.generalCheckboxFunctionality && field.generalCheckboxFunctionality === functionality){ %> selected="selected" <% } %>><%= functionality %></option>
									<% }) %>
								</select>
								<br>
							</span>
						
							<!-- Classes to be removd to playes cells -->
							<span class="fieldRemoveClass-container">
								<span class="question-mark" name="fieldRemoveClass<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldRemoveClass<%= count %>">
									Removes a class(es) to specific field(s). If you want to add more than one class, separate it with a space.
								</span> 
								<label name="fieldRemoveClass<%= count %>">Class(es) to remove:</label> 
								<input class="field-input" type="text" name="fieldRemoveClass<%= count %>" <% if(field.removeClass){ %> value="<%= field.removeClass %>" <% } %> >
								<br>
							</span>

							<!-- Classes to be added to playes cells -->
							<span class="fieldAddClass-container">
								<span class="question-mark" name="fieldAddClass<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldAddClass<%= count %>">
									Adds a class(es) to specific field(s). If you want to add more than one class, separate it with a space.
								</span> 
								<label name="fieldAddClass<%= count %>">Class(es) to add:</label> 
								<input class="field-input" type="text" name="fieldAddClass<%= count %>" <% if(field.addClass){ %> value="<%= field.addClass %>" <% } %> >
								<br>
							</span>
						
							<!-- Fields to which the classes will be added -->
							<span class="fieldAddFields-container">
								<span class="question-mark" name="fieldAddFields<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldAddFields<%= count %>">
									Adds a class(es) to specific field(s). If you want the class(es) to more than one field, separate it with a space.
								</span> 
								<label name="fieldAddFields<%= count %>">Field(s) to add:</label> 
								<input class="field-input" type="text" name="fieldAddFields<%= count %>" <% if(field.addFields){ %> value="<%= field.addFields %>" <% } %> >
								<br>
							</span>
						<% } else if(field.calcMethod && field.calcMethod === "multiple-fields"){ %>
							<!-- DESC: class // PLAYER: class -->
							<% if(field.multipleFieldsMethod && field.multipleFieldsMethod === "sets"){ %>
								<!-- DESC: alt // PLAYER: sets value -->
								<span class="fieldMultipleFieldsSets-container">
									<span class="question-mark" name="fieldMultipleFieldsSets<%= count %>">
										<i class="question icon"></i>
									</span>
									<span class="explanation" name="fieldMultipleFieldsSets<%= count %>">
										For calculation, this will be multiplied by the input/value
									</span> 
									<label name="fieldMultipleFieldsSets<%= count %>">Sets Value:</label> 
									<input class="field-input" type="number" name="fieldMultipleFieldsSets<%= count %>" <% if(field.setsValue){ %> value="<%= field.setsValue %>" <% } %>>
									<br>
								</span>
							<% } %>
							<span class="fieldMultipleFieldsMethod-container">
								<span class="question-mark" name="fieldMultipleFieldsMethod<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldMultipleFieldsMethod<%= count %>">
									Calculates value based on other fields
								</span> 
								<label name="fieldMultipleFieldsMethod<%= count %>">Multiple calc method:</label> 
								<select class="field-input fieldMultipleFieldsMethod" name="fieldMultipleFieldsMethod<%= count %>">
								<% calcMethods.forEach(function(method){ %>
									<% if(method == "general-checkbox" || method === "multiple-fields"){ %>
										<% return %>
									<% } else { %>
										<option value="<%= method %>" <% if(field.multipleFieldsMethod && field.multipleFieldsMethod === method){ %> selected="selected" <% } %> ><%= method %></option>
									<% } %>
								<% }) %>
									<option value="multiply" <% if(field.multipleFieldsMethod && field.multipleFieldsMethod === "multiply"){ %> selected="selected" <% } %>  >multiply</option>
								</select>
								<br>
							</span>
						
							<!-- Fields relevant to calculation -->
							<span class="fieldMultipleFieldsRelevantFields-container">
								<span class="question-mark" name="fieldMultipleFieldsRelevantFields<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldMultipleFieldsRelevantFields<%= count %>">
									All fields which should be added together for calculation, seperated by space.
								</span> 
								<label name="fieldMultipleFieldsRelevantFields<%= count %>">Fields to add:</label> 
								<input class="field-input" type="text" name="fieldMultipleFieldsRelevantFields<%= count %>" <% if(field.multipleFieldsRelevantFields){ %> value="<%= field.multipleFieldsRelevantFields %>" <% } %>>
							</span>
							<br>
						<% } else if(field.calcMethod && field.calcMethod === "general-select"){ %>
							<!-- DESC:  // PLAYER: Enables selection form values  -->
							<span class="fieldSelect-container">
								<span class="question-mark" name="fieldSelect<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldSelect<%= count %>">
									Display selection field, separate values by a space.
								</span> 
								<label name="fieldSelect<%= count %>">Select options:</label> 
								<input class="field-input" type="text" name="fieldSelect<%= count %>" <% if(field.selectOptions){ %> value="<%= field.selectOptions %>" <% } %> >
							</span>
							<br>
						<% } else if(field.calcMethod && field.calcMethod === "reach-target"){ %>
								<!-- DESC:  // PLAYER:  -->
								<span class="fieldReachTargetRange-container">
									<span class="question-mark" name="fieldReachTargetRange<%= count %>">
										<i class="question icon"></i>
									</span>
									<span class="explanation" name="fieldReachTargetRange<%= count %>">
										The ranges of target points, and their value. write like [target:value], separate ranges by a space
									</span> 
									<label name="fieldReachTargetRange<%= count %>">Reach target ranges:</label> 
									<input class="field-input" type="text" name="fieldReachTargetRange<%= count %>" <% if(field.reachTargetRange){ %> value="<%= field.reachTargetRange %>" <% } %>>
								</span>
								<br>
								<!-- DESC:  // PLAYER:  -->
								<span class="fieldReachTargetMethod-container">
									<span class="question-mark" name="fieldReachTargetMethod<%= count %>">
										<i class="question icon"></i>
									</span>
									<span class="explanation" name="fieldReachTargetMethod<%= count %>">
										The method of checking the target
									</span> 
									<label name="fieldReachTargetMethod<%= count %>">Method:</label> 
									<select class="field-input fieldReachTargetMethod" name="fieldReachTargetMethod<%= count %>">
										<% console.log(`Field ${count} reach target method is ${field.reachTargetMethod}`) %>
										<% reachTargetMethods.forEach(function(method){ %>
											<option value="<%= method %>"<% if(field.reachTargetMethod === method){ %> selected="selected"<% } %>><%= method %></option>
										<% }) %>
									</select>
								</span>
								<br>
								<% if(field.reachTargetMethod === "other-field" || field.reachTargetMethod === "dynamic-other-field"){ %>
									<!-- DESC:  // PLAYER: Enables selection form values  -->
									<span class="fieldReachTargetOtherField-container">
										<span class="question-mark" name="fieldReachTargetOtherField<%= count %>">
											<i class="question icon"></i>
										</span>
										<span class="explanation" name="fieldReachTargetOtherField<%= count %>">
											Will calculate reach-taget by this field
										</span> 
										<label name="fieldReachTargetOtherField<%= count %>">Other field:</label> 
										<input class="field-input" type="text" name="fieldReachTargetOtherField<%= count %>"<% if(field.reachTargetOtherField){ %> value="<%= field.reachTargetOtherField %>"<% } %>>
									</span>
									<br>
									<% if(field.reachTargetMethod === "dynamic-other-field"){ %>
										<!-- DESC:  // PLAYER:  -->
										<span class="fieldReachTargetDynamicOtherFieldGlobal-container">
											<br>
											<span class="question-mark" name="fieldReachTargetDynamicOtherFieldGlobal<%= count %>">
												<i class="question icon"></i>
											</span>
											<span class="explanation" name="fieldReachTargetDynamicOtherFieldGlobal<%= count %>">
												For dynamic other field - wether the other field is a global or personal field (check if refering to a global field)
											</span> 
											<label name="fieldReachTargetDynamicOtherFieldGlobal<%= count %>">Global field:</label> 
											<input class="field-input" type="checkbox" name="fieldReachTargetDynamicOtherFieldGlobal<%= count %>" <% if(field.reachTargetOtherFieldGlobal){ %> checked<% } %>>
										</span>
									<% } %>
								<% } %>
						<% } else if(field.calcMethod && field.calcMethod === "unique-sets"){ %>
							<!-- DESC:  // PLAYER: Enables selection form values  -->
							<span class="fieldUiqueSetsValue-container">
								<br>
								<span class="question-mark" name="fieldUiqueSetsValue<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldUiqueSetsValue<%= count %>">
									Will calculate unique sets by these values (separated by a space), write like this: [amount:points]
								</span> 
								<label name="fieldUiqueSetsValue<%= count %>">Sets Values:</label> 
								<input class="field-input" type="text" name="fieldUiqueSetsValue<%= count %>"<% if(field.uniqueSetsValue){ %> value="<%= field.uniqueSetsValue %>"<% } %>>
							</span>
							<!-- DESC:  // PLAYER:  -->
							<span class="fieldUniqueSetsFields-container">
								<br>
								<span class="question-mark" name="fieldUniqueSetsFields<%= count %>">
									<i class="question icon"></i>
								</span>
								<span class="explanation" name="fieldUniqueSetsFields<%= count %>">
									Will calculate unique sets by these fields (separated by a space)
								</span> 
								<label name="fieldUniqueSetsFields<%= count %>">Fields:</label> 
								<input class="field-input" type="text" name="fieldUniqueSetsFields<%= count %>"<% if(field.uniqueSetsFields){ %> value="<%= field.uniqueSetsFields %>"<% } %>>
							</span>
						<% }%>
						
						<!-- DESC: displayed icon // field.icon -->
						<span class="fieldIcon-container">
						<span class="question-mark" name="fieldIcon<%= count %>">
							<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldIcon<%= count %>">
								Icon to display in desc cell, can be URL or path
							</span> 
							<label name="fieldIcon<%= count %>">Icon:</label> 
							<input class="field-input" type="text" placeholder="icon url/path" name="fieldIcon<%= count %>" <% if(field.icon){ %> value="<%= field.icon %>" <% } %> >
						</span> 
						<span class="fieldUpload-container">
							<span class="question-mark" name="fieldUpload<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldUpload<%= count %>">
								If the icon is from URL, you can check this to upload it to the server
							</span> 
							<label name="fieldUpload<%= count %>">Upload?</label> 
							<input class="field-input" type="checkbox" name="fieldUpload<%= count %>">
						</span>
						<br>
						
						<!-- DESC: hover content -->
						<span class="fieldDescription-container">
							<span class="question-mark" name="fieldDescription<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldDescription<%= count %>">
								Description that will be displayed when hovering over the field
							</span> 
							<label name="fieldDescription<%= count %>">Field description:</label> 
							<input class="field-input" type="text" name="fieldDescription<%= count %>" placeholder="field description" <% if(field.description){ %> value="<%= field.description %>" <% } %>>
						</span>
						<br>
						
						<!-- DESC: css classes // field.classesDesc -->
						<span class="fieldDescClasses-container">
							<span class="question-mark" name="fieldDescClasses<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldDescClasses<%= count %>">
								css classes to add to desc cell
							</span> 
							<label name="fieldDescClasses<%= count %>">Desc classes:</label> 
							<input class="field-input" type="text" name="fieldDescClasses<%= count %>" placeholder="field desc classes" <% if(field.classesDesc){ %> value="<%= field.classesDesc %>" <% } %> >
						</span>
						<br>
						
						<!-- PLAYER: css classes // field.classesPlayer -->
						<span class="fieldPlayerClasses-container">
							<span class="question-mark" name="fieldPlayerClasses<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldPlayerClasses<%= count %>">
								css classes to add to players cells
							</span> 
							<label name="fieldPlayerClasses<%= count %>">Player classes:</label> 
							<input class="field-input" type="text" name="fieldPlayerClasses<%= count %>" placeholder="field player classes" <% if(field.classesPlayer){ %> value="<%= field.classesPlayer %>" <% } %> >
						</span>
						<br>
						
						<!-- DESC: class // PLAYER: class // field.calcMethod -->
						<span class="fieldCalcMethod-container">
							<span class="question-mark" name="fieldCalcMethod<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldCalcMethod<%= count %>">
								Calculation type, reg is simple multiply of value * input
							</span> 
							<label name="fieldCalcMethod<%= count %>">Calculation Method:</label> 
							<select class="field-input fieldCalcMethod" name="fieldCalcMethod<%= count %>">
								<% calcMethods.forEach(function(method){ %>
									<option value="<%= method %>" <% if(field.calcMethod && field.calcMethod === method){ %> selected="selected" <% } %> ><%= method %></option>
								<% }) %>
							</select>
						</span>
						<br>
						
						<!-- PLAYER: form type // field.type -->
						<!-- <span class="fieldFormType-container">
							<span class="question-mark" name="fieldFormType<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldFormType<%= count %>">
								Input type of the cell
							</span> 
							<label name="fieldFormType<%= count %>">Form type:</label> 
							<select class="field-input" name="fieldFormType<%= count %>">
								<% formTypes.forEach(function(formType){ %>
									<option value="<%= formType %>" <% if(field.type && field.type === formType){ %> selected="selected" <% } %> ><%= formType %></option>
								<% }) %>
							</select>
						</span>
						<br> -->
						
						<!-- DESC: class // PLAYER: class // field.scoreTotal -->
						<span class="fieldScoreTotal-container">
							<span class="question-mark" name="fieldScoreTotal<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldScoreTotal<%= count %>">
								If checked, this cell will be added to the total score of the player
							</span> 
							<label name="fieldScoreTotal<%= count %>">Score total?</label> 
							<input class="field-input" type="checkbox" name="fieldScoreTotal<%= count %>" <% if(field.scoreTotal){ %> checked <% } %> >
						</span>
						
						<!-- DESC: class // PLAYER: class -->
						<span class="fieldHidden-container">
							<span class="question-mark" name="fieldHidden<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldHidden<%= count %>">
								If checked, this cell will be hidden
							</span> 
							<label name="fieldHidden<%= count %>">Hidden?</label> 
							<input class="field-input" type="checkbox" name="fieldHidden<%= count %>" <% if(field.hidden){ %> checked <% } %> >
						</span>
						
						<!-- DESC: // PLAYER: class -->
						<span class="fieldDisabled-container">
							<span class="question-mark" name="fieldDisabled<%= count %>">
								<i class="question icon"></i>
							</span>
							<span class="explanation" name="fieldDisabled<%= count %>">
								If checked, this cell will be disabled
							</span> 
							<label name="fieldDisabled<%= count %>">Disabled?</label> 
							<input class="field-input" type="checkbox" name="fieldDisabled<%= count %>" <% if(field.disabled ){ %> checked <% } %> >
						</span>
					</div>
				</div>
				<% }) %>
			</div>

			<input id="fields-count" type="number" value="<%= count %>" class="hidden" name="count">
			<input id="fields-skip" type="text" value="" class="hidden" name="skip">

			<input type="submit" value="Edit game">
		</form>
	</div>

	<script type="text/javascript" src="/js/add-game.js"></script>
<%- include("../partials/footer") %>